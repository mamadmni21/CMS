<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payroll Management</title>

    <!-- Google Icons & Bootstrap -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Page-Specific Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/payroll_management.css') }}">
</head>
<body>

<!-- Top Bar -->
<div class="top-bar">
    <div class="top-left">
        <img src="{{ url_for('static', filename='assets/img/logo_cms.png') }}" alt="CMS Icon">
        <h1>Payroll Management</h1>
    </div>
    <div class="top-right">
        <a href="{{ url_for('main.dashboard') }}" class="back-button">
            <span class="material-icons">home</span>
        </a>
    </div>
</div>

<!-- Welcome Section -->
<div class="welcome-section">
    <div class="welcome-box">
        <div class="profile-pic">
            <img src="{{ url_for('static', filename='assets/img/user_placeholder.png') }}" alt="User Photo">
        </div>
        <div class="welcome-text">
            <h2>Welcome, {{ usr_full_nm or 'HR User' }} ðŸ‘‹</h2>
            <p class="subtitle">HR Payroll Management Area</p>
        </div>
    </div>
</div>

<!-- Content Layout -->
<div class="container-fluid">
    <!-- Row 1: Sidebar + Main Content -->
    <div class="row">
        <!-- Left Column -->
        <div class="col-md-3 content-box-1">
            <div class="content-tool-box">
                <h2>Payroll Apps</h2>
                <div class="tool-btn-container">
                    <button class="tool-pg-btn" onclick="showForm('salary')">
                        <img src="{{ url_for('static', filename='assets/img/icons/salary_setup_icon.png') }}" alt="Salary Setup">
                        <span>Salary Setup</span>
                    </button>
                    <button class="tool-pg-btn" onclick="showForm('payslip')">
                        <img src="{{ url_for('static', filename='assets/img/icons/payslip_history_icon.png') }}" alt="Payslip History">
                        <span>Payslip History</span>
                    </button>
                    <button class="tool-pg-btn" onclick="showForm('report')">
                        <img src="{{ url_for('static', filename='assets/img/icons/payroll_report_icon.png') }}" alt="Payroll Report">
                        <span>Payroll Report</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-9 content-box-2" id="dynamic-form">
            <p>Select a section to get started.</p>
        </div>
    </div>

    <!-- Row 2: Reference Tables -->
    <div class="row mt-3">
        <div class="col-12 content-box-3" id="reference-table">
            <p>Reference tables will be displayed here.</p>
        </div>
    </div>
</div>

<script>
    function showForm(section) {
        let formBox = document.getElementById("dynamic-form");
        let tableBox = document.getElementById("reference-table");

        if (section === "salary") {
            formBox.innerHTML = `
                <h3>Salary Setup Form</h3>
                <form>
                    <!-- Employee Dropdown -->
                    <div class="mb-3">
                        <label for="employee_name">Employee Name</label>
                        <select id="employee_name" class="form-control" required>
                            <option value="">-- Select Employee --</option>
                            <option value="Samy Tardiyanto">Samy Tardiyanto</option>
                            <option value="Gladis Aramain">Gladis Aramain</option>
                        </select>
                    </div>

                    <!-- Base Salary -->
                    <div class="mb-3">
                        <label for="base_salary">Base Salary (IDR)</label>
                        <input type="number" id="base_salary" class="form-control" placeholder="e.g. 5000000" required>
                    </div>

                    <!-- Bonus -->
                    <div class="mb-3">
                        <label for="bonus">Bonus</label>
                        <input type="number" id="bonus" class="form-control" placeholder="e.g. 1000000">
                    </div>

                    <!-- Allowance -->
                    <div class="mb-3">
                        <label for="allowance">Allowance</label>
                        <input type="number" id="allowance" class="form-control" placeholder="e.g. 500000">
                    </div>

                    <!-- Insurance -->
                    <div class="mb-3">
                        <label for="insurance">Insurance</label>
                        <input type="number" id="insurance" class="form-control" placeholder="e.g. 200000">
                    </div>

                    <!-- Other Benefits -->
                    <div class="mb-3">
                        <label for="others">Other Benefits / Deductions</label>
                        <input type="number" id="others" class="form-control" placeholder="e.g. 150000">
                    </div>

                    <!-- Save Button -->
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
            `;

            tableBox.innerHTML = `
                <h3>Salary Reference Table</h3>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Employee</th>
                            <th>Base Salary (IDR)</th>
                            <th>Bonus</th>
                            <th>Allowance</th>
                            <th>Insurance</th>
                            <th>Others</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Samy Tardiyanto</td>
                            <td>5,000,000</td>
                            <td>1,000,000</td>
                            <td>500,000</td>
                            <td>200,000</td>
                            <td>150,000</td>
                        </tr>
                        <tr>
                            <td>Gladis Aramain</td>
                            <td>6,500,000</td>
                            <td>1,200,000</td>
                            <td>600,000</td>
                            <td>250,000</td>
                            <td>100,000</td>
                        </tr>
                    </tbody>
                </table>
            `;
        } else if (section === "payslip") {
            formBox.innerHTML = `
                <h3>Payslip History Search</h3>
                <form onsubmit="event.preventDefault(); showPayslip();">
                    <div class="mb-3">
                        <label for="payslip_employee">Employee Name</label>
                        <select id="payslip_employee" class="form-control" required>
                            <option value="">-- Select Employee --</option>
                            <option value="Samy Tardiyanto">Samy Tardiyanto</option>
                            <option value="Gladis Aramain">Gladis Aramain</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
                <div id="payslip-result" class="mt-3"></div>
            `;
            tableBox.innerHTML = `<p>Select an employee to view payslip history.</p>`;
        } else if (section === "report") {
            formBox.innerHTML = `
                <h3>Payroll Report Generator</h3>
                <form onsubmit="event.preventDefault(); showPayrollReport();">
                    <div class="mb-3">
                        <label for="report_month">Select Date</label>
                        <input type="date" id="report_month" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-success">Generate Report</button>
                </form>
                <div id="report-result" class="mt-3"></div>
            `;
            tableBox.innerHTML = `<p>Select a date to generate payroll report.</p>`;
        }
    }

    // Payslip Result
    function showPayslip() {
        let employee = document.getElementById("payslip_employee").value;
        let payslipDiv = document.getElementById("payslip-result");

        if (employee === "Samy Tardiyanto") {
            payslipDiv.innerHTML = `
                <h4>Payslip for July 2025</h4>
                <ul>
                    <li><strong>Employee:</strong> Samy Tardiyanto</li>
                    <li><strong>Base Salary:</strong> 5,000,000 IDR</li>
                    <li><strong>Bonus:</strong> 1,000,000 IDR</li>
                    <li><strong>Allowance:</strong> 500,000 IDR</li>
                    <li><strong>Deductions:</strong> 200,000 IDR</li>
                    <li><strong>Net Pay:</strong> 6,300,000 IDR</li>
                </ul>
            `;
        } else if (employee === "Gladis Aramain") {
            payslipDiv.innerHTML = `
                <h4>Payslip for July 2025</h4>
                <ul>
                    <li><strong>Employee:</strong> Gladis Aramain</li>
                    <li><strong>Base Salary:</strong> 6,500,000 IDR</li>
                    <li><strong>Bonus:</strong> 1,200,000 IDR</li>
                    <li><strong>Allowance:</strong> 600,000 IDR</li>
                    <li><strong>Deductions:</strong> 250,000 IDR</li>
                    <li><strong>Net Pay:</strong> 8,050,000 IDR</li>
                </ul>
            `;
        }
    }

    // Payroll Report Result
    function showPayrollReport() {
        let reportDate = document.getElementById("report_month").value;
        let reportDiv = document.getElementById("report-result");

        if (!reportDate) {
            reportDiv.innerHTML = `<p class="text-danger">Please select a date.</p>`;
            return;
        }

        reportDiv.innerHTML = `
            <h4>Payroll Report for ${reportDate}</h4>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>Employee</th>
                        <th>Base Salary</th>
                        <th>Bonus</th>
                        <th>Allowance</th>
                        <th>Deductions</th>
                        <th>Net Pay</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Samy Tardiyanto</td>
                        <td>5,000,000</td>
                        <td>1,000,000</td>
                        <td>500,000</td>
                        <td>200,000</td>
                        <td>6,300,000</td>
                    </tr>
                    <tr>
                        <td>Gladis Aramain</td>
                        <td>6,500,000</td>
                        <td>1,200,000</td>
                        <td>600,000</td>
                        <td>250,000</td>
                        <td>8,050,000</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="5">Total Payout</th>
                        <th>14,350,000</th>
                    </tr>
                </tfoot>
            </table>
        `;
    }
</script>



</body>
</html>
